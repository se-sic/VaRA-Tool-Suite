include/fpcsc/perf_util/feature_cmd.h:
    1|       |#ifndef FPCSC_PERFUTIL_FEATURECMD_H
    2|       |#define FPCSC_PERFUTIL_FEATURECMD_H
    3|       |
    4|       |#include <exception>
    5|       |#include <stdlib.h>
    6|       |#include <string>
    7|       |
    8|       |namespace fpcsc {
    9|      4|inline bool isFeatureEnabled(int argc, char *argv[], std::string FeatureName) {
   10|      7|  for (int CurrentArg = 1; CurrentArg < argc; ++CurrentArg) {
   11|      4|    if (argv[CurrentArg] == FeatureName) {
   12|      1|      return true;
   13|      1|    }
   14|      4|  }
   15|       |
   16|      3|  return false;
   17|      4|}
   18|       |
   19|      0|inline long getFeatureValue(int argc, char *argv[], std::string FeatureName) {
   20|      0|  int CurrentArg = 1;
   21|      0|  for (; CurrentArg < argc; ++CurrentArg) {
   22|      0|    if (argv[CurrentArg] == FeatureName) {
   23|      0|      ++CurrentArg;
   24|      0|      break;
   25|      0|    }
   26|      0|  }
   27|      0|
   28|      0|  if (CurrentArg >= argc) {
   29|      0|    return 0;
   30|      0|  }
   31|      0|
   32|      0|  return strtol(argv[CurrentArg], NULL, 0);
   33|      0|}
   34|       |
   35|       |} // namespace fpcsc
   36|       |
   37|       |#endif // FPCSC_PERFUTIL_FEATURECMD_H

include/fpcsc/perf_util/sleep.h:
    1|       |#ifndef FPCSC_PERFUTIL_SLEEP_H
    2|       |#define FPCSC_PERFUTIL_SLEEP_H
    3|       |
    4|       |#include <chrono>
    5|       |#include <iostream>
    6|       |#include <thread>
    7|       |
    8|       |namespace fpcsc {
    9|       |
   10|      5|inline void sleep_for_secs(unsigned Secs) {
   11|      5|  std::cout << "Sleeping for " << Secs << " seconds" << std::endl;
   12|      5|  std::this_thread::sleep_for(std::chrono::seconds(Secs));
   13|      5|}
   14|       |
   15|      0|inline void sleep_for_millisecs(unsigned Millisecs) {
   16|      0|  std::cout << "Sleeping for " << Millisecs << " milliseconds" << std::endl;
   17|      0|  std::this_thread::sleep_for(std::chrono::milliseconds(Millisecs));
   18|      0|}
   19|       |
   20|      0|inline void sleep_for_nanosecs(unsigned millisecs) {
   21|      0|  std::this_thread::sleep_for(std::chrono::nanoseconds(millisecs));
   22|      0|}
   23|       |
   24|       |} // namespace fpcsc
   25|       |
   26|       |#endif // FPCSC_PERFUTIL_SLEEP_H

src/MultiSharedMultipleRegions/FeatureHeader.cpp:
    1|       |#include "FeatureHeader.h"
    2|       |
    3|       |bool ExternFeature = false;
    4|       |
    5|       |static bool CppFeature = false;
    6|       |
    7|      0|void enableCppFeature() {
    8|      0|  CppFeature = true;
    9|      0|}
   10|       |
   11|      1|bool isCppFeatureEnabled() {
   12|      1|  return CppFeature;
   13|      1|}

src/MultiSharedMultipleRegions/FeatureHeader.h:
    1|       |#ifndef FEATURE_HEADER_H
    2|       |#define FEATURE_HEADER_H
    3|       |
    4|       |extern bool ExternFeature;
    5|       |
    6|       |static inline bool HeaderFeature = false;
    7|       |
    8|      0|inline void enableExternFeature() {
    9|      0|  ExternFeature = true;
   10|      0|}
   11|       |
   12|       |void enableCppFeature();
   13|       |bool isCppFeatureEnabled();
   14|       |
   15|       |#endif // FEATURE_HEADER_H

src/MultiSharedMultipleRegions/MSMRmain.cpp:
    1|       |#include "FeatureHeader.h"
    2|       |
    3|       |#include "fpcsc/perf_util/sleep.h"
    4|       |#include "fpcsc/perf_util/feature_cmd.h"
    5|       |
    6|       |#include <string>
    7|       |
    8|      1|int main(int argc, char *argv[] ) {
    9|      1|  bool Slow = false;
   10|       |
   11|      1|  if (fpcsc::isFeatureEnabled(argc, argv, std::string("--slow"))) {
   12|      1|    Slow = true;
   13|      1|  }
   14|       |
   15|      1|  if (fpcsc::isFeatureEnabled(argc, argv, std::string("--header"))) {
   16|      0|    HeaderFeature = true;
   17|      0|  }
   18|       |
   19|      1|  if (fpcsc::isFeatureEnabled(argc, argv, std::string("--extern"))) {
   20|      0|    enableExternFeature();
   21|      0|  }
   22|       |
   23|      1|  if (fpcsc::isFeatureEnabled(argc, argv, std::string("--cpp"))) {
   24|      0|    enableCppFeature();
   25|      0|  }
   26|       |
   27|       |  // Multiple regions related to --slow that take different amounts of time.
   28|       |
   29|      1|  if (Slow) {
   30|      1|    fpcsc::sleep_for_secs(5);
   31|      1|  } else {
   32|      0|    fpcsc::sleep_for_secs(3);
   33|      0|  }
   34|       |
   35|      1|  fpcsc::sleep_for_secs(2); // General waiting time
   36|       |
   37|      1|  if (HeaderFeature) {
   38|      0|    fpcsc::sleep_for_secs(3);
   39|      1|  } else {
   40|      1|    fpcsc::sleep_for_secs(1);
   41|      1|  }
   42|       |
   43|      1|  fpcsc::sleep_for_secs(2); // General waiting time
   44|       |
   45|      1|  if (ExternFeature) {
   46|      0|    fpcsc::sleep_for_secs(6);
   47|      0|  }
   48|       |
   49|      1|  fpcsc::sleep_for_secs(2); // General waiting time
   50|       |
   51|      1|  if (isCppFeatureEnabled()) {
   52|      0|    fpcsc::sleep_for_secs(3);
   53|      0|  }
   54|       |
   55|      1|  return 0;
   56|      1|}

